tick_size_major = 0,
title = xVar,
properties = axis_props(
axis = list(strokeWidth = 0),
labels = list(fontSize = 16,
fill = grey60K,
fontWeight = 200,
font = 'Segoe UI'))) %>%
# grid = list(strokeWidth = 0))) %>%
scale_numeric("y", domain = yLim) %>%
add_tooltip(plot_tooltip, "hover")
df %>%
ggvis(x = ~diffBabies, y = ~tfr,
fill = ~PR_DESL_W_WNM) %>%
set_options(height = heightPlot, width = widthPlot) %>%
layer_points(size := 25, size.hover := 100, fill.hover := "royalblue",
stroke := "#BD202E",  stroke.hover := "navy", strokeWidth.hover := 0.75,
fill := "#BD202E",  opacity := 0.5) %>%
# layer_points(size = ~PR_DESL_W_WNM,
#              stroke := grey60K, stroke.hover := 'red',
#              size.hover := 100, fill.hover := "royalblue") %>%
# layer_text(text := ~CountryName,
#            fontSize := 16,
#            fontWeight := 300,
#            align := 'center',
#            baseline:="bottom",
#            dy := 1,
#            font := 'Segoe UI') %>%
add_axis(type = 'y',
title = yVar,
tick_size_major = 0,
properties = axis_props(
axis = list(strokeWidth = 0),
labels = list(fontSize = 16,
fill = grey60K,
fontWeight = 200,
font = 'Segoe UI'))) %>%
# grid = list(
# strokeWidth = 0)
# )) %>%
add_axis(type = 'x',
tick_size_major = 0,
title = xVar,
properties = axis_props(
axis = list(strokeWidth = 0),
labels = list(fontSize = 16,
fill = grey60K,
fontWeight = 200,
font = 'Segoe UI'))) %>%
# grid = list(strokeWidth = 0))) %>%
scale_numeric("y", domain = yLim) %>%
add_tooltip(plot_tooltip, "hover")
df %>%
ggvis(x = ~diffBabies, y = ~tfr,
fill = ~PR_DESL_W_WNM) %>%
set_options(height = heightPlot, width = widthPlot) %>%
layer_points(size := 25, size.hover := 100, fill.hover := "royalblue",
stroke := "#BD202E",  stroke.hover := "navy", strokeWidth.hover := 0.75,
fill := "#BD202E",  opacity := 0.5) %>%
layer_points(size = ~PR_DESL_W_WNM,
stroke := grey60K, stroke.hover := 'red',
size.hover := 100, fill.hover := "royalblue") %>%
# layer_text(text := ~CountryName,
#            fontSize := 16,
#            fontWeight := 300,
#            align := 'center',
#            baseline:="bottom",
#            dy := 1,
#            font := 'Segoe UI') %>%
add_axis(type = 'y',
title = yVar,
tick_size_major = 0,
properties = axis_props(
axis = list(strokeWidth = 0),
labels = list(fontSize = 16,
fill = grey60K,
fontWeight = 200,
font = 'Segoe UI'))) %>%
# grid = list(
# strokeWidth = 0)
# )) %>%
add_axis(type = 'x',
tick_size_major = 0,
title = xVar,
properties = axis_props(
axis = list(strokeWidth = 0),
labels = list(fontSize = 16,
fill = grey60K,
fontWeight = 200,
font = 'Segoe UI'))) %>%
# grid = list(strokeWidth = 0))) %>%
scale_numeric("y", domain = yLim) %>%
add_tooltip(plot_tooltip, "hover")
df %>%
ggvis(x = ~diffBabies, y = ~tfr,
fill = ~PR_DESL_W_WNM) %>%
set_options(height = heightPlot, width = widthPlot) %>%
layer_points(size := 25, size.hover := 100, fill.hover := "royalblue",
stroke := "#BD202E",  stroke.hover := "navy", strokeWidth.hover := 0.75,
fill := "#BD202E",  opacity := 0.5) %>%
layer_points(size = ~PR_DESL_W_WNM,
stroke := grey60K, stroke.hover := 'red',
size.hover := 100, fill.hover := "red",
fillOpacity := 1, fillOpacity.hover := 0.5) %>%
# layer_text(text := ~CountryName,
#            fontSize := 16,
#            fontWeight := 300,
#            align := 'center',
#            baseline:="bottom",
#            dy := 1,
#            font := 'Segoe UI') %>%
add_axis(type = 'y',
title = yVar,
tick_size_major = 0,
properties = axis_props(
axis = list(strokeWidth = 0),
labels = list(fontSize = 16,
fill = grey60K,
fontWeight = 200,
font = 'Segoe UI'))) %>%
# grid = list(
# strokeWidth = 0)
# )) %>%
add_axis(type = 'x',
tick_size_major = 0,
title = xVar,
properties = axis_props(
axis = list(strokeWidth = 0),
labels = list(fontSize = 16,
fill = grey60K,
fontWeight = 200,
font = 'Segoe UI'))) %>%
# grid = list(strokeWidth = 0))) %>%
scale_numeric("y", domain = yLim) %>%
add_tooltip(plot_tooltip, "hover")
df %>%
ggvis(x = ~diffBabies, y = ~tfr,
fill = ~PR_DESL_W_WNM) %>%
set_options(height = heightPlot, width = widthPlot) %>%
layer_points(size = ~PR_DESL_W_WNM,
stroke := grey60K, stroke.hover := 'red',
fill.hover := "red",
fillOpacity := 1, fillOpacity.hover := 0.5) %>%
# layer_text(text := ~CountryName,
#            fontSize := 16,
#            fontWeight := 300,
#            align := 'center',
#            baseline:="bottom",
#            dy := 1,
#            font := 'Segoe UI') %>%
add_axis(type = 'y',
title = yVar,
tick_size_major = 0,
properties = axis_props(
axis = list(strokeWidth = 0),
labels = list(fontSize = 16,
fill = grey60K,
fontWeight = 200,
font = 'Segoe UI'))) %>%
# grid = list(
# strokeWidth = 0)
# )) %>%
add_axis(type = 'x',
tick_size_major = 0,
title = xVar,
properties = axis_props(
axis = list(strokeWidth = 0),
labels = list(fontSize = 16,
fill = grey60K,
fontWeight = 200,
font = 'Segoe UI'))) %>%
# grid = list(strokeWidth = 0))) %>%
scale_numeric("y", domain = yLim) %>%
add_tooltip(plot_tooltip, "hover")
df %>%
ggvis(x = ~diffBabies, y = ~tfr,
fill = ~PR_DESL_W_WNM) %>%
set_options(height = heightPlot, width = widthPlot) %>%
layer_points(size = ~PR_DESL_W_WNM,
stroke := grey60K, stroke.hover := 'red',
fill.hover := "red",
fillOpacity := 1, fillOpacity.hover := 0.5) %>%
layer_text(text := ~CountryName,
fontSize := 16,
fontWeight := 300,
align := 'center',
baseline:="top",
dy := 10,
font := 'Segoe UI') %>%
add_axis(type = 'y',
title = yVar,
tick_size_major = 0,
properties = axis_props(
axis = list(strokeWidth = 0),
labels = list(fontSize = 16,
fill = grey60K,
fontWeight = 200,
font = 'Segoe UI'))) %>%
# grid = list(
# strokeWidth = 0)
# )) %>%
add_axis(type = 'x',
tick_size_major = 0,
title = xVar,
properties = axis_props(
axis = list(strokeWidth = 0),
labels = list(fontSize = 16,
fill = grey60K,
fontWeight = 200,
font = 'Segoe UI'))) %>%
# grid = list(strokeWidth = 0))) %>%
scale_numeric("y", domain = yLim) %>%
add_tooltip(plot_tooltip, "hover")
df %>%
ggvis(x = ~diffBabies, y = ~tfr,
fill = ~PR_DESL_W_WNM) %>%
set_options(height = heightPlot, width = widthPlot) %>%
layer_points(size = ~PR_DESL_W_WNM,
stroke := grey60K, stroke.hover := 'red',
fill.hover := "red",
fillOpacity := 1, fillOpacity.hover := 0.5) %>%
layer_text(text := ~CountryName,
fontSize := 16,
fontWeight := 300,
align := 'center',
baseline:="top",
dy := 10,
font := 'Segoe UI') %>%
add_axis(type = 'y',
title = yVar,
tick_size_major = 0,
properties = axis_props(
axis = list(strokeWidth = 0),
labels = list(fontSize = 16,
fill = grey60K,
fontWeight = 200,
font = 'Segoe UI'))) %>%
# grid = list(
# strokeWidth = 0)
# )) %>%
add_axis(type = 'x',
tick_size_major = 0,
title = xVar,
properties = axis_props(
axis = list(strokeWidth = 0),
title = list(fontSize = 18,
fill = grey70K,
fontWeight = 300,
font = 'Segoe UI'),
labels = list(fontSize = 16,
fill = grey60K,
fontWeight = 200,
font = 'Segoe UI'))) %>%
# grid = list(strokeWidth = 0))) %>%
scale_numeric("y", domain = yLim) %>%
add_tooltip(plot_tooltip, "hover")
df %>%
ggvis(x = ~diffBabies, y = ~tfr,
fill = ~PR_DESL_W_WNM) %>%
set_options(height = heightPlot, width = widthPlot) %>%
layer_points(size = ~PR_DESL_W_WNM,
stroke := grey60K, stroke.hover := 'red',
fill.hover := "red",
fillOpacity := 1, fillOpacity.hover := 0.5) %>%
layer_text(text := ~CountryName,
fontSize := 16,
fontWeight := 300,
align := 'center',
baseline:="top",
dy := 10,
font := 'Segoe UI') %>%
add_axis(type = 'y',
title = yVar,
tick_size_major = 0,
properties = axis_props(
axis = list(strokeWidth = 0),
title = list(fontSize = 18,
fill = grey70K,
fontWeight = 300,
font = 'Segoe UI'),
labels = list(fontSize = 16,
fill = grey60K,
fontWeight = 200,
font = 'Segoe UI'))) %>%
# grid = list(
# strokeWidth = 0)
# )) %>%
add_axis(type = 'x',
tick_size_major = 0,
title = xVar,
properties = axis_props(
axis = list(strokeWidth = 0),
title = list(fontSize = 18,
fill = grey70K,
fontWeight = 300,
font = 'Segoe UI'),
labels = list(fontSize = 16,
fill = grey60K,
fontWeight = 200,
font = 'Segoe UI'))) %>%
# grid = list(strokeWidth = 0))) %>%
scale_numeric("y", domain = yLim) %>%
add_tooltip(plot_tooltip, "hover")
df %>%
ggvis(x = ~diffBabies, y = ~tfr,
fill = ~PR_DESL_W_WNM) %>%
set_options(height = heightPlot, width = widthPlot) %>%
layer_points(size = ~PR_DESL_W_WNM,
stroke := grey60K, stroke.hover := 'red',
fill.hover := "red",
fillOpacity := 1, fillOpacity.hover := 0.5) %>%
layer_text(text := ~CountryName,
fontSize := 16,
fontWeight := 300,
align := 'center',
baseline:="top",
dy := 10,
font := 'Segoe UI') %>%
add_axis(type = 'y',
title = yVar,
tick_size_major = 0,
properties = axis_props(
axis = list(strokeWidth = 0),
title = list(fontSize = 18,
fill = grey70K,
fontWeight = 300,
font = 'Segoe UI'),
labels = list(fontSize = 16,
fill = grey60K,
fontWeight = 200,
font = 'Segoe UI'))) %>%
# grid = list(
# strokeWidth = 0)
# )) %>%
add_axis(type = 'x',
tick_size_major = 0,
title = xVar,
properties = axis_props(
axis = list(strokeWidth = 0),
title = list(fontSize = 18,
fill = grey70K,
fontWeight = 300,
font = 'Segoe UI'),
labels = list(fontSize = 16,
fill = grey60K,
fontWeight = 200,
font = 'Segoe UI'))) %>%
# grid = list(strokeWidth = 0))) %>%
scale_numeric("y", domain = yLim) %>%
add_tooltip(plot_tooltip, "hover", props(fill := "black", fill.hover := "red"))
natl = read.csv('~/Documents/USAID/West Africa Regional 2016/dataout/WAFR_DHS_natl.csv')
library(llamar)
View(natl)
df = natl %>%
filter(Indicator %in% c('Infant mortality rate', 'Under-five mortality rate (5 year periods)'))
loadPkgs()
df = natl %>%
filter(Indicator %in% c('Infant mortality rate', 'Under-five mortality rate (5 year periods)'))
df = natl %>%
filter(Indicator %in% c('Infant mortality rate', 'Under-five mortality rate (5 year periods)')) %>%
select(country = CountryName, year = SurveyYear, IndicatorId, Value) %>%
spread(IndicatorId, Value)
View(df)
colnames(df)
df = natl %>%
filter(Indicator %in% c('Infant mortality rate', 'Under-five mortality rate (5 year periods)')) %>%
select(country = CountryName, year = SurveyYear, IndicatorId, Value) %>%
spread(IndicatorId, Value) %>%
rename(infant = CM_ECMR_C_IMR, under5 = CM_ECMT_C_U5M)
ggplot(df, aes(x = infant, y = under5, colour = year, group = country)) +
geom_point() +
geom_line()
ggplot(df, aes(x = infant, y = under5,
colour = year, group = country)) +
geom_point(size = 4) +
geom_line() +
scale_colour_gradientn(colours = brewer.pal(9, 'YlGnBu')) +
facet_wrap(~country)
order = unique(order$country)
order = df %>%
arrange(desc(infant))
order$country
order = unique(order$country)
df$country= factor(df$country, levels = order)
ggplot(df, aes(x = infant, y = under5,
colour = year, group = country)) +
geom_point(size = 4) +
geom_line() +
scale_colour_gradientn(colours = brewer.pal(9, 'YlGnBu')) +
facet_wrap(~country)
ggplot(df, aes(x = infant, y = under5,
alpha = year, group = country)) +
geom_point(size = 4) +
geom_line() +
# scale_colour_gradientn(colours = brewer.pal(9, 'YlGnBu')) +
facet_wrap(~country) +
theme_xygrid()
ggplot(df, aes(x = infant, y = under5,
alpha = year, group = country)) +
geom_line() +
geom_point(size = 4, colour = 'white', alpha = 1) +
geom_point(size = 4, colour = 'dodgerblue') +
# scale_colour_gradientn(colours = brewer.pal(9, 'YlGnBu')) +
facet_wrap(~country) +
theme_xygrid()
ggplot(df, aes(x = infant, y = under5,
alpha = year, group = country)) +
geom_line(colour = 'dodgerblue') +
geom_point(size = 4, colour = 'white', alpha = 1) +
geom_point(size = 4, colour = 'dodgerblue') +
# scale_colour_gradientn(colours = brewer.pal(9, 'YlGnBu')) +
facet_wrap(~country) +
theme_xygrid()
df = natl %>%
filter(Indicator %in% c('Infant mortality rate', 'Under-five mortality rate (5 year periods)')) %>%
select(country = CountryName, year = SurveyYear, IndicatorId, Value) %>%
spread(IndicatorId, Value) %>%
rename(infant = CM_ECMR_C_IMR, under5 = CM_ECMT_C_U5M) %>%
group_by(country) %>%
mutate(yearNum = dense_rank(year))
library(llamar)
loadPkgs()
natl = read.csv('~/Documents/USAID/West Africa Regional 2016/dataout/WAFR_DHS_natl.csv')
df = natl %>%
filter(Indicator %in% c('Infant mortality rate', 'Under-five mortality rate (5 year periods)',
'Maternal mortality rate')) %>%
select(country = CountryName, year = SurveyYear, IndicatorId, Value) %>%
spread(IndicatorId, Value) %>%
rename(infant = CM_ECMR_C_IMR,
under5 = CM_ECMT_C_U5M,
maternal = MM_MMRT_W_MRT) %>%
group_by(country) %>%
mutate(yearNum = dense_rank(year))
order = df %>%
arrange(desc(infant))
order = unique(order$country)
df$country= factor(df$country, levels = order)
ggplot(df, aes(x = infant, y = under5,
alpha = year, group = country)) +
geom_line(colour = 'dodgerblue') +
geom_point(size = 4, colour = 'white', alpha = 1) +
geom_point(size = 4, colour = 'dodgerblue') +
# scale_colour_gradientn(colours = brewer.pal(9, 'YlGnBu')) +
facet_wrap(~country) +
theme_xygrid()
ggplot(df, aes(x = maternal, y = under5,
alpha = year, group = country)) +
geom_line(colour = 'dodgerblue') +
geom_point(size = 4, colour = 'white', alpha = 1) +
geom_point(size = 4, colour = 'dodgerblue') +
# scale_colour_gradientn(colours = brewer.pal(9, 'YlGnBu')) +
facet_wrap(~country) +
theme_xygrid()
ggplot(df, aes(x = infant, y = under5,
alpha = year, group = country)) +
geom_line(colour = grey40K) +
geom_point(size = 4, colour = 'white', alpha = 1) +
geom_point(size = 4, colour = grey40L) +
theme_xygrid()
ggplot(df, aes(x = infant, y = under5,
alpha = year, group = country)) +
geom_line(colour = grey40K) +
geom_point(size = 4, colour = 'white', alpha = 1) +
geom_point(size = 4, colour = grey40K) +
theme_xygrid()
x = ggplot(df, aes(x = infant, y = under5,
alpha = year, group = country)) +
geom_line(colour = grey40K) +
geom_point(size = 4, colour = 'white', alpha = 1) +
geom_point(size = 4, colour = grey40K) +
theme_xygrid()
ggplot(df, aes(x = infant, y = under5,
alpha = year, group = country)) +
geom_line(colour = 'dodgerblue') +
geom_point(size = 4, colour = 'white', alpha = 1) +
geom_point(size = 4, colour = 'dodgerblue') +
# scale_colour_gradientn(colours = brewer.pal(9, 'YlGnBu')) +
facet_wrap(~country) +
theme_xygrid() + x
x + ggplot(df, aes(x = infant, y = under5,
alpha = year, group = country)) +
geom_line(colour = 'dodgerblue') +
geom_point(size = 4, colour = 'white', alpha = 1) +
geom_point(size = 4, colour = 'dodgerblue') +
# scale_colour_gradientn(colours = brewer.pal(9, 'YlGnBu')) +
facet_wrap(~country) +
theme_xygrid()
ggplot(df, aes(x = infant, y = under5,
alpha = year, group = country)) +
geom_line(colour = 'dodgerblue') +
geom_point(size = 4, colour = 'white', alpha = 1) +
geom_point(size = 4, colour = 'dodgerblue') +
# scale_colour_gradientn(colours = brewer.pal(9, 'YlGnBu')) +
facet_wrap(~country) +
theme_xygrid()
y = ggplot(df, aes(x = infant, y = under5,
alpha = year, group = country)) +
geom_line(colour = 'dodgerblue') +
geom_point(size = 4, colour = 'white', alpha = 1) +
geom_point(size = 4, colour = 'dodgerblue') +
# scale_colour_gradientn(colours = brewer.pal(9, 'YlGnBu')) +
facet_wrap(~country) +
theme_xygrid()
x+y
x = ggplot(df, aes(x = infant, y = under5,
alpha = year, group = country)) +
geom_line(colour = grey40K) +
geom_point(size = 4, colour = 'white', alpha = 1) +
geom_point(size = 4, colour = grey80K) +
theme_xygrid()
x
y
